# =================================================================
# ü§ñ Automagik Tools - Environment Configuration  
# =================================================================
# Copy this file to .env and configure your values
#
# Usage with uvx (no installation required):
#   uvx automagik-tools serve --tool automagik
#
# Usage with uv (for development):
#   uv run automagik-tools serve --tool automagik
#
# For Claude Desktop, use uvx in stdio mode:
#   uvx automagik-tools serve --tool automagik --transport stdio

# =================================================================
# üîß Core System Configuration (REQUIRED)
# =================================================================

# Server Configuration
HOST=localhost
PORT=8884
# Note: Systemd service runs dual transports on:
# - SSE: PORT (8884) 
# - HTTP: PORT+1 (8885)

# Transport Detection (automatically detected, usually stdio for Claude Desktop)
MCP_TRANSPORT=stdio

# =================================================================
# ü§ñ AI Provider Keys (At least OPENAI_API_KEY required for Genie)
# =================================================================
OPENAI_API_KEY=

# =================================================================
# üõ†Ô∏è Tool-Specific Configuration
# =================================================================

# Automagik Tool Configuration
# Unified configuration for all Automagik-related tools
AUTOMAGIK_API_KEY=your-api-key-here
AUTOMAGIK_BASE_URL=http://localhost:8881
AUTOMAGIK_TIMEOUT=30
# Enable markdown enhancement (AI-powered formatting of responses)
# Set to false to get raw JSON responses for better integration with Genie
AUTOMAGIK_ENABLE_MARKDOWN=true
AUTOMAGIK_OPENAPI_URL=http://localhost:8881/api/v1/openapi.json
# Transport mode override (automatically detected in most cases)
AUTOMAGIK_TRANSPORT=stdio

# AutoMagik Workflows Tool Configuration
# Smart Claude workflow orchestration with real-time progress tracking
AUTOMAGIK_WORKFLOWS_API_KEY=your-api-key-here
AUTOMAGIK_WORKFLOWS_BASE_URL=http://localhost:8881
AUTOMAGIK_WORKFLOWS_TIMEOUT=7200
AUTOMAGIK_WORKFLOWS_POLLING_INTERVAL=8
AUTOMAGIK_WORKFLOWS_MAX_RETRIES=3

# Genie Tool Configuration
# Generic MCP tool orchestrator with persistent memory
# NOTE: Genie requires at least one MCP server to be configured (see MCP Server Configurations below)
GENIE_MODEL=gpt-4.1
GENIE_MEMORY_DB=genie_memory.db
GENIE_STORAGE_DB=genie_storage.db
GENIE_SESSION_ID=global_genie_session
GENIE_HISTORY_RUNS=3
GENIE_SHOW_TOOL_CALLS=true

# Genie MCP Server Management
GENIE_MCP_CLEANUP_TIMEOUT=2.0
GENIE_SSE_CLEANUP_DELAY=0.2
GENIE_AGGRESSIVE_CLEANUP=true

# MCP Server Configurations - Choose one of these methods:
# Method 1: JSON configuration (for multiple servers)
# GENIE_MCP_CONFIGS={"filesystem": {"command": "npx", "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"]}}

# Method 2: Individual server configs (uncomment to use)
# Example: Connect Genie to Automagik agents - uses unified AUTOMAGIK_* variables above

# Wait Utility Tool Configuration
# Smart timing functions for agent workflows
WAIT_MAX_DURATION=3600
WAIT_DEFAULT_PROGRESS_INTERVAL=1.0

# =================================================================
# üöÄ Dynamic OpenAPI Tool Support
# =================================================================
# Use automagik-tools to serve any OpenAPI endpoint directly:
#   uvx automagik-tools serve --openapi-url https://api.example.com/openapi.json
#   uvx automagika-tools serve --openapi-url https://api.example.com/openapi.json --api-key YOUR_KEY
#
# No additional environment variables needed for basic OpenAPI tools.
# For authentication, use the --api-key flag or set tool-specific variables below.

# =================================================================
# ‚öôÔ∏è Performance & Development Settings (Optional)
# =================================================================

# AI Processing Configuration for OpenAPI tools
AUTOMAGIK_TOOLS_OPENAI_MODEL=gpt-4.1-mini
AUTOMAGIK_TOOLS_MAX_TOKENS=2000
AUTOMAGIK_TOOLS_TEMPERATURE=0.1

# FastMCP Configuration
AUTOMAGIK_TOOLS_LOG_LEVEL=INFO
AUTOMAGIK_TOOLS_RESOURCE_PREFIX_FORMAT=path
